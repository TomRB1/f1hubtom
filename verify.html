<!DOCTYPE html>
<html class="dark" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>F1 Code Verification</title>
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<link href="https://fonts.googleapis.com" rel="preconnect"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;700&display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet"/>
<script id="tailwind-config">
tailwind.config = {
    darkMode: "class",
    theme: {
        extend: {
            colors: {
                "primary": "#f20d0d",
                "background-light": "#f8f5f5",
                "background-dark": "#15151e",
            },
            fontFamily: {
                "display": ["Space Grotesk", "sans-serif"]
            },
            borderRadius: {
                "DEFAULT": "0.25rem",
                "lg": "0.5rem",
                "xl": "0.75rem",
                "full": "9999px"
            },
        },
    },
}
</script>
<style>
.material-symbols-outlined {
    font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;
}
.code-input:focus {
    outline: 0;
    border-color: #f20d0d;
    box-shadow: 0 0 0 2px rgba(242, 13, 13, 0.5);
}

/* Ocultar spinners de números (estaba en tu código original) */
input[type=number]::-webkit-inner-spin-button,
input[type=number]::-webkit-outer-spin-button {
    -webkit-appearance: none;
    margin: 0;
}
input[type=number] {
    -moz-appearance: textfield;
    appearance: textfield;
}
body { min-height: max(884px, 100dvh); }
</style>
</head>
<body class="bg-background-light dark:bg-background-dark font-display">
<div class="relative flex h-auto min-h-screen w-full flex-col items-center justify-center p-4">
    <div class="absolute top-6 left-6 flex items-center gap-2">
        <span class="material-symbols-outlined text-primary text-4xl">sports_score</span>
        <span class="text-xl font-bold uppercase tracking-widest text-white">GRID PASS</span>
    </div>
    <main class="w-full max-w-md text-center">
        <div class="relative flex h-auto w-full flex-col bg-background-light dark:bg-background-dark overflow-x-hidden">
            <h1 class="text-gray-900 dark:text-white tracking-light text-[32px] font-bold leading-tight px-4 text-center pb-3 pt-6">Welcome, Driver</h1>
        </div>
        <div class="relative flex h-auto w-full flex-col bg-background-light dark:bg-background-dark overflow-x-hidden">
            <p class="text-gray-600 dark:text-gray-300 text-base font-normal leading-normal pb-3 pt-1 px-4 text-center">Please enter the 6-digit code sent to you.</p>
        </div>


        <div id="code-section" class="relative flex h-auto w-full flex-col bg-background-light dark:bg-background-dark overflow-x-hidden">
            <div class="flex justify-center px-4 py-3">
                <fieldset class="relative flex gap-2 sm:gap-4">
                                        <input class="code-input flex h-14 w-12 text-center text-lg font-bold text-gray-900 dark:text-white bg-background-light dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg transition-colors duration-200" maxlength="1" type="number" value=""/>
                    <input class="code-input flex h-14 w-12 text-center text-lg font-bold text-gray-900 dark:text-white bg-background-light dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg transition-colors duration-200" maxlength="1" type="number" value=""/>
                    <input class="code-input flex h-14 w-12 text-center text-lg font-bold text-gray-900 dark:text-white bg-background-light dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg transition-colors duration-200" maxlength="1" type="number" value=""/>
                    <input class="code-input flex h-14 w-12 text-center text-lg font-bold text-gray-900 dark:text-white bg-background-light dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg transition-colors duration-200" maxlength="1" type="number" value=""/>
                    <input class="code-input flex h-14 w-12 text-center text-lg font-bold text-gray-900 dark:text-white bg-background-light dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg transition-colors duration-200" maxlength="1" type="number" value=""/>
                    <input class="code-input flex h-14 w-12 text-center text-lg font-bold text-gray-900 dark:text-white bg-background-light dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg transition-colors duration-200" maxlength="1" type="number" value=""/>
                </fieldset>
            </div>
        </div>


        <div class="mt-4">
            <div class="relative flex h-auto w-full flex-col bg-background-light dark:bg-background-dark overflow-x-hidden">
                <div class="flex px-4 py-3">
                    <button id="verifyBtn" class="flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-12 px-5 flex-1 bg-primary text-white text-base font-bold leading-normal tracking-[0.015em] uppercase hover:bg-primary/90 transition-colors duration-200">
                        <span class="truncate">Verify Code</span>
                    </button>
                </div>
            </div>
        </div>
    </main>
</div>
<script>
const email = localStorage.getItem('f1_email');
if(!email){
    alert('No email saved. Volve al login.');
    window.location.href = 'index.html';
}

const codeInputs = document.querySelectorAll('.code-input');
const verifyBtn = document.getElementById('verifyBtn');
const generatedCode = localStorage.getItem('f1_code');

verifyBtn.addEventListener('click', () => {
    const userCode = Array.from(codeInputs).map(i => i.value).join('');
    if(userCode === generatedCode){
        alert('Codigo correcto! Redirigiendo...');
        localStorage.removeItem('f1_code');
        window.location.href = 'menu.html'; // Cambiado a menu.html
    } else {
        alert('Codigo incorrecto, intente de nuevo.');
        // Opcional: limpiar los campos para intentar de nuevo
        Array.from(codeInputs).forEach(i => i.value = '');
        codeInputs[0].focus();
    }
});

// Lógica para saltar automáticamente al siguiente campo y mover el cursor hacia atrás (código original de stitch)
codeInputs.forEach((input, index) => {
    input.addEventListener('input', (e) => {
        if (e.target.value.length === 1 && index < codeInputs.length - 1) {
            codeInputs[index + 1].focus();
        }
    });
    input.addEventListener('keydown', (e) => {
        if (e.key === 'Backspace' && e.target.value.length === 0 && index > 0) {
            codeInputs[index - 1].focus();
        }
    });
});
</script>
</body>
</html>
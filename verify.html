<!DOCTYPE html>
<html class="dark" lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Email Verification – F1 HUB</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;700&display=swap" rel="stylesheet" />

  <style>
    body { font-family: 'Space Grotesk', sans-serif; }
  </style>
</head>

<body class="bg-[#0e0e0e] text-white min-h-screen flex items-center justify-center px-6">

  <div id="box" class="w-full max-w-md bg-black/40 border border-white/10 backdrop-blur-md p-8 rounded-xl shadow-xl text-center">
    <h1 class="text-3xl font-bold text-red-500 mb-4">Verifying Email…</h1>
    <p class="text-white/80" id="status">Please wait while we verify your account…</p>
  </div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";
    import {
      getAuth,
      applyActionCode
    } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-auth.js";

    // Firebase config
    const firebaseConfig = {
      apiKey: "AIzaSyCI5lOdyNV6intEbFy9BXPP-gcPDD3vQOY",
      authDomain: "webmussetof1.firebaseapp.com",
      projectId: "webmussetof1",
      storageBucket: "webmussetof1.firebasestorage.app",
      messagingSenderId: "461670115383",
      appId: "1:461670115383:web:55a98857d6d620efd5b7b2"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    const box = document.getElementById("box");
    const status = document.getElementById("status");

    // Leer parámetros de la URL
    const params = new URLSearchParams(window.location.search);
    const mode = params.get("mode");
    const oobCode = params.get("oobCode");

    if (mode === "verifyEmail" && oobCode) {
      applyActionCode(auth, oobCode)
        .then(() => {
          status.textContent = "Your email was successfully verified!";
          box.innerHTML += `
            <a href="index.html" class="mt-6 inline-block bg-red-600 hover:bg-red-700 px-6 py-3 rounded-lg font-bold">
              Go to Login
            </a>
          `;
        })
        .catch((err) => {
          console.error(err);
          status.textContent = "Error verifying your email. The link may have expired.";
        });
    } else {
      status.textContent = "Invalid verification link.";
    }
  </script>

</body>
</html>
